{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "lux-table-column-helper",
  "type": "registry:lib",
  "title": "LuxTable Column Helper",
  "description": "Type-safe column definition helper with built-in support for common patterns like accessor, display, and action columns.",
  "author": "LuxTable <https://luxtable.dev>",
  "dependencies": [
    "@tanstack/react-table"
  ],
  "registryDependencies": [
    "https://unpkg.com/luxtable/registry/lux-table.json"
  ],
  "categories": [
    "table",
    "utility"
  ],
  "docs": "# LuxTable Column Helper\n\nType-safe column definition helper for TanStack Table.\n\n## Usage\n\n```tsx\nimport { createColumnHelper } from 'luxtable';\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  role: string;\n}\n\nconst columnHelper = createColumnHelper<User>();\n\nconst columns = [\n  // Accessor column - display data from a field\n  columnHelper.accessor('name', {\n    header: 'Name',\n    cell: (info) => info.getValue(),\n  }),\n\n  // Accessor with custom cell renderer\n  columnHelper.accessor('email', {\n    header: 'Email',\n    cell: (info) => <a href={`mailto:${info.getValue()}`}>{info.getValue()}</a>,\n  }),\n\n  // Display column - for custom content like actions\n  columnHelper.display({\n    id: 'actions',\n    header: 'Actions',\n    cell: ({ row }) => (\n      <div className=\"flex gap-2\">\n        <button onClick={() => handleEdit(row.original)}>Edit</button>\n        <button onClick={() => handleDelete(row.original.id)}>Delete</button>\n      </div>\n    ),\n  }),\n];\n```\n\n## Column Options\n\n- `header` - Column header text or render function\n- `cell` - Cell render function\n- `size` - Column width in pixels\n- `enableSorting` - Enable/disable sorting (default: true)\n- `enableHiding` - Enable/disable column hiding (default: true)\n- `meta` - Custom metadata (e.g., filterVariant: 'select')\n",
  "files": [
    {
      "path": "lib/column-helper.tsx",
      "content": "import { createColumnHelper as tanstackCreateColumnHelper, ColumnDef, CellContext, HeaderContext } from \"@tanstack/react-table\";\nimport * as React from \"react\";\nimport { LuxDataTableColumnHeader } from \"../components/lux-table/column-header\";\n\n// camelCase -> Title Case conversion\nconst toTitleCase = (str: string) => {\n  return str\n    .replace(/([A-Z])/g, \" $1\")\n    .replace(/^./, (s) => s.toUpperCase())\n    .trim();\n};\n\nexport type { ColumnDef };\n\nexport interface ColumnOptions<TData, TValue> {\n  id?: string;\n  header?: string | ((context: HeaderContext<TData, TValue>) => React.ReactNode);\n  cell?: (info: CellContext<TData, TValue>) => React.ReactNode;\n\n  enableSorting?: boolean;\n  /** Column meta information (e.g. filterVariant) */\n  meta?: {\n    /** Filter type: \"text\" (default) or \"select\" (dropdown) */\n    filterVariant?: \"text\" | \"select\";\n  };\n}\n\n// Interface for special column types\nexport type ColumnType = \"text\" | \"status\" | \"progress\" | \"boolean\" | \"date\" | \"currency\" | \"custom\";\n\nexport interface SmartColumnOptions<TData, TValue> extends ColumnOptions<TData, TValue> {\n  /** \n   * Column type - used for automatic rendering\n   * - text: Displays value as plain text (default)\n   * - status: Displays with StatusCell component\n   * - progress: Displays with ProgressCell component\n   * - boolean: Displays with BooleanCell component\n   * - date: Displays with DateCell component\n   * - currency: Displays with CurrencyCell component\n   * - custom: Uses your provided cell function\n   */\n  type?: ColumnType;\n  /** Custom colors for Status type */\n  statusColors?: Record<string, { bg: string; text: string; darkBg?: string; darkText?: string }>;\n  /** Bar color for Progress type */\n  progressBarColor?: string;\n  /** Whether to show label for Progress type */\n  showProgressLabel?: boolean;\n  /** Labels for Boolean type */\n  booleanLabels?: { true: string; false: string };\n  /** Format for Date type */\n  dateFormat?: \"short\" | \"long\" | \"relative\";\n  /** Currency code for Currency type */\n  currency?: string;\n  /** Locale */\n  locale?: string;\n}\n\nexport function createColumnHelper<TData>() {\n  const helper = tanstackCreateColumnHelper<TData>();\n\n  return {\n    /**\n     * Simple accessor - if cell is not provided, value is rendered automatically\n     */\n    accessor: <TValue,>(\n      accessor: keyof TData & string,\n      column?: ColumnOptions<TData, TValue>\n    ): ColumnDef<TData, TValue> => {\n      const headerContent = column?.header;\n\n      const finalColumn = {\n        ...column,\n        // enableSorting is true by default\n        enableSorting: column?.enableSorting !== false,\n        // Pass meta information (filterVariant etc.)\n        meta: column?.meta,\n        // Use LuxDataTableColumnHeader if header is string or undefined\n        header: typeof headerContent === 'function'\n          ? headerContent\n          : ({ column: colParam }: HeaderContext<TData, TValue>) => (\n            <LuxDataTableColumnHeader\n              column={colParam}\n              title={typeof headerContent === 'string' ? headerContent : toTitleCase(accessor)}\n            />\n          ),\n        // If cell is not defined, show value directly\n        cell: column?.cell || ((info: CellContext<TData, TValue>) => {\n          const value = info.getValue();\n          // if null or undefined, show -\n          if (value === null || value === undefined) {\n            return \"-\";\n          }\n          // If string or number, show directly\n          return String(value);\n        }),\n      };\n      return helper.accessor(accessor as any, finalColumn as any);\n    },\n\n    /**\n     * Display column (for actions etc.)\n     */\n    display: (column: {\n      id: string;\n      header?: string | (() => React.ReactNode);\n      cell?: (info: CellContext<TData, unknown>) => React.ReactNode;\n      enableSorting?: boolean;\n      enableHiding?: boolean;\n    }): ColumnDef<TData, unknown> => {\n      return helper.display(column as any);\n    },\n\n    /**\n     * Action column - specialized display column for row actions\n     * Disables sorting by default\n     */\n    action: (column: {\n      cell: (info: CellContext<TData, unknown>) => React.ReactNode;\n      id?: string;\n      header?: string | (() => React.ReactNode);\n    }): ColumnDef<TData, unknown> => {\n      return helper.display({\n        id: \"actions\",\n        header: \"\",\n        enableSorting: false,\n        enableHiding: false,\n        ...column,\n      } as any);\n    },\n\n    /**\n     * Create all columns automatically - Table directly from JSON\n     * Just specifying headers is enough, cell is rendered automatically\n     */\n    auto: (\n      columns: Array<{\n        accessor: keyof TData & string;\n        header: string;\n        cell?: (info: CellContext<TData, unknown>) => React.ReactNode;\n      }>\n    ): ColumnDef<TData, unknown>[] => {\n      return columns.map((col) => {\n        return helper.accessor(col.accessor as any, {\n          header: ({ column }: HeaderContext<TData, unknown>) => (\n            <LuxDataTableColumnHeader column={column} title={col.header} />\n          ),\n          cell: col.cell || ((info: CellContext<TData, unknown>) => {\n            const value = info.getValue();\n            if (value === null || value === undefined) return \"-\";\n            return String(value);\n          }),\n        } as any);\n      });\n    },\n  };\n}\n\n/**\n * Creates automatic columns from JSON data\n * Uses column names as header (camelCase -> Title Case)\n */\nexport function createColumnsFromData<TData extends Record<string, unknown>>(\n  data: TData[],\n  options?: {\n    exclude?: (keyof TData)[];\n    include?: (keyof TData)[];\n    headers?: Partial<Record<keyof TData, string>>;\n    cells?: Partial<Record<keyof TData, (info: CellContext<TData, unknown>) => React.ReactNode>>;\n  }\n): ColumnDef<TData, unknown>[] {\n  if (!data || data.length === 0) return [];\n\n  const helper = tanstackCreateColumnHelper<TData>();\n  const firstRow = data[0];\n  let keys = Object.keys(firstRow) as (keyof TData & string)[];\n\n  // Filter include/exclude\n  if (options?.include) {\n    keys = keys.filter((k) => options.include?.includes(k));\n  }\n  if (options?.exclude) {\n    keys = keys.filter((k) => !options.exclude?.includes(k));\n  }\n\n\n\n  return keys.map((key) => {\n    const headerText = options?.headers?.[key] || toTitleCase(key as string);\n    const cellRenderer = options?.cells?.[key];\n\n    return helper.accessor(key as any, {\n      header: ({ column }: HeaderContext<TData, unknown>) => <LuxDataTableColumnHeader column={column} title={headerText} />,\n      cell: cellRenderer || ((info) => {\n        const value = info.getValue();\n        if (value === null || value === undefined) return \"-\";\n        return String(value);\n      }),\n    } as any);\n  });\n}\n",
      "type": "registry:lib",
      "target": "lib/column-helper.tsx"
    }
  ]
}